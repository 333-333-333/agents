%% Secuencia de reserva con pago vía Flow.cl
%% Dominio: payments | Tipo: sequence
sequenceDiagram
    actor User as Usuario
    participant App as Mobile App
    participant API as Bastet API
    participant Flow as Flow.cl

    User->>App: Confirmar reserva
    App->>API: POST /bookings
    API->>API: Validar disponibilidad
    API->>Flow: Crear orden de pago
    Flow-->>API: URL de pago
    API-->>App: Redirigir a pago
    App->>Flow: Completar pago
    Flow->>API: Webhook confirmación
    API-->>App: Reserva confirmada
    App-->>User: Mostrar confirmación
